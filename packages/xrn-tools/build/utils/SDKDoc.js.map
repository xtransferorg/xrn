{"version":3,"file":"SDKDoc.js","sourceRoot":"","sources":["../../src/utils/SDKDoc.ts"],"names":[],"mappings":";;;;;;AAAA,8CAAsB;AACtB,wDAA+B;AAC/B,gDAAwB;AAExB,4CAA4D;AAC5D,qCAAkC;AAGlC,MAAa,MAAM;IACjB,UAAU,CAAS;IACnB,OAAO,CAAS;IAEhB,YAAY,UAAkB;QAC5B,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,CAAC,OAAO,GAAG,cAAI,CAAC,IAAI,CACtB,mBAAO,EACP,MAAM,EACN,OAAO,EACP,UAAU,EACV,GAAG,IAAI,CAAC,UAAU,EAAE,EACpB,KAAK,CACN,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,QAAQ,CAAC,OAAgB;QAC7B,IAAI,CAAC,OAAO,CAAC,OAAO,EAAE,CAAC;YACrB,OAAO,CAAC,IAAI,CAAC,GAAG,OAAO,CAAC,QAAQ,gBAAgB,CAAC,CAAC;YAClD,OAAO;QACT,CAAC;QACD,MAAM,OAAO,GAAG,cAAI,CAAC,IAAI,CAAC,IAAI,CAAC,OAAO,EAAE,GAAG,OAAO,CAAC,OAAO,MAAM,CAAC,CAAC;QAClE,MAAM,IAAI,GAAG,OAAO,CAAC;QACrB,MAAM,MAAM,GAAG,IAAI,eAAM,CAAC,IAAI,CAAC,CAAC;QAEhC,MAAM,YAAY,GAAG,cAAI,CAAC,IAAI,CAAC,+BAAmB,EAAE,aAAa,CAAC,CAAC;QACnE,MAAM,QAAQ,GAAG,MAAM,kBAAO,CAAC,QAAQ,CAAC,YAAY,EAAE,OAAO,CAAC,CAAC;QAC/D,MAAM,aAAa,GAAG,MAAM,CAAC,oBAAoB,EAAE,CAAC;QACpD,MAAM,OAAO,GAAG,aAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,EAAE,IAAI,EAAE,aAAa,EAAE,CAAC,CAAC;QAE9D,kBAAO,CAAC,aAAa,CAAC,cAAI,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;QAC7C,kBAAO,CAAC,aAAa,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;IAC1C,CAAC;CACF;AAjCD,wBAiCC","sourcesContent":["import ejs from \"ejs\";\nimport fsExtra from \"fs-extra\";\nimport path from \"path\";\n\nimport { XRN_DIR, TOOLS_TEMPLATES_DIR } from \"../Constants\";\nimport { Screen } from \"./Screen\";\nimport { XrnMeta } from \"./types\";\n\nexport class SDKDoc {\n  sdkVersion: string;\n  docPath: string;\n\n  constructor(sdkVersion: string) {\n    this.sdkVersion = sdkVersion;\n    this.docPath = path.join(\n      XRN_DIR,\n      \"docs\",\n      \"pages\",\n      \"versions\",\n      `${this.sdkVersion}`,\n      \"sdk\"\n    );\n  }\n\n  async writeDoc(xrnMeta: XrnMeta) {\n    if (!xrnMeta.sdkPath) {\n      console.warn(`${xrnMeta.showName} 没有 sdkPath，跳过`);\n      return;\n    }\n    const docPath = path.join(this.docPath, `${xrnMeta.sdkPath}.mdx`);\n    const meta = xrnMeta;\n    const screen = new Screen(meta);\n\n    const templatePath = path.join(TOOLS_TEMPLATES_DIR, \"sdk-doc.ejs\");\n    const template = await fsExtra.readFile(templatePath, \"utf-8\");\n    const screenContent = screen.getScreenFileContent();\n    const content = ejs.render(template, { meta, screenContent });\n\n    fsExtra.ensureDirSync(path.dirname(docPath));\n    fsExtra.writeFileSync(docPath, content);\n  }\n}\n"]}