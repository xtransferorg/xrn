{"version":3,"file":"syncScreensToPackages.js","sourceRoot":"","sources":["../src/syncScreensToPackages.ts"],"names":[],"mappings":";;AAGA,sDAiCC;AApCD,uDAA+C;AAC/C,2CAA4C;AAErC,KAAK,UAAU,qBAAqB;IACzC,IAAI,CAAC;QACH,WAAW;QACX,MAAM,OAAO,GAAG,mBAAU,CAAC,YAAY,EAAE,CAAC;QAE1C,iBAAiB;QACjB,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,EAAE,CAAC;gBAChC,OAAO,CAAC,IAAI,CACV,UAAU,MAAM,CAAC,OAAO,CAAC,QAAQ,oBAAoB,CACtD,CAAC;gBACF,SAAS;YACX,CAAC;YAED,MAAM,GAAG,GAAG,sBAAO,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;YAEhE,IAAI,CAAC,GAAG,EAAE,CAAC;gBACT,OAAO,CAAC,IAAI,CAAC,KAAK,MAAM,CAAC,OAAO,CAAC,WAAW,SAAS,CAAC,CAAC;gBACvD,SAAS;YACX,CAAC;YAED,qBAAqB;YACrB,GAAG,CAAC,gBAAgB,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;YACrC,GAAG,CAAC,gBAAgB,EAAE,CAAC;YAEvB,OAAO,CAAC,GAAG,CAAC,OAAO,MAAM,CAAC,OAAO,CAAC,WAAW,MAAM,CAAC,CAAC;QACvD,CAAC;QAED,OAAO,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;IAC3B,CAAC;IAAC,OAAO,KAAK,EAAE,CAAC;QACf,OAAO,CAAC,KAAK,CAAC,WAAW,EAAE,KAAK,CAAC,CAAC;QAClC,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;AACH,CAAC","sourcesContent":["import { Package } from \"./utils/PackageUtils\";\nimport { ScreenList } from \"./utils/Screen\";\n\nexport async function syncScreensToPackages() {\n  try {\n    // 读取所有屏幕配置\n    const screens = ScreenList.loadFromJson();\n\n    // 遍历每个 screen 配置\n    for (const screen of screens) {\n      if (!screen.xrnMeta.packageName) {\n        console.warn(\n          `screen ${screen.xrnMeta.showName} 没有 packageName，跳过`\n        );\n        continue;\n      }\n\n      const pkg = Package.fromPackageName(screen.xrnMeta.packageName);\n\n      if (!pkg) {\n        console.warn(`包 ${screen.xrnMeta.packageName} 不存在，跳过`);\n        continue;\n      }\n\n      // 更新并保存 package.json\n      pkg.updateFromScreen(screen.xrnMeta);\n      pkg.writePackageJson();\n\n      console.log(`已更新 ${screen.xrnMeta.packageName} 的配置`);\n    }\n\n    console.log(\"所有包配置同步完成\");\n  } catch (error) {\n    console.error(\"同步包配置时出错:\", error);\n    process.exit(1);\n  }\n}\n"]}